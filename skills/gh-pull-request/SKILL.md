---
name: gh-pull-request
description: Create or update GitHub pull request with proper format and required information.
---

# GitHub Pull Request

PR を作成または更新する際のテンプレートとガイドライン。

## PR 作成時の必須事項

1. Issue 番号を含める（closes #xxx で自動クローズ）
2. Notion タスクがあれば TASK-xxx でリンク
3. 概要（このPRで何を実現するか、どのように実現するか）を簡潔に記載
4. 嬉しいこと（この変更で何が良くなるか、できるようになるか）をユーザー目線で記載
5. リスク（大きな変更やリスクがない場合はその旨を自然な文章で記載）
6. 計画（実装前に考えた計画を記録）
7. 動作確認（実装した機能の実際の動作確認）をチェックボックスで一覧

## PR テンプレート

```markdown
closes #<Issue番号> [TASK-<Notion ID>](<Notion URL>)

このPRで何を実現するか、どのように実現するかを簡潔に記載。

これにより、〜ができるようになります / 〜が改善されます。（嬉しいことをユーザー目線で記載）

内部実装のみの変更で、既存の機能やデータに影響はありません。（リスクがない場合）

<!-- リスクがある場合の例 -->
<!-- データベーススキーマを変更します。本番環境への適用前に十分な検証が必要です。 -->
<!-- 既存のユーザーデータの移行が必要になります。データ損失のリスクがあるため、慎重に確認をお願いします。 -->

## 計画

実装前に Plan モードで考えた計画を詳細に記録。箇条書きだけでなく、実装の意図や背景、なぜその方法を選んだか、どのような手順で実装したかを自然な文章で説明する。Claude が後で読み返したときに、思考の流れを追えるレベルの詳細さが必要。

## 動作確認

実装した機能を実際に動かして確認した内容をチェックボックスで一覧:

- [ ] 対象機能の動作確認（ブラウザ操作や API 呼び出しで実際に動作を確認）
- [ ] 既存機能への影響確認（関連機能を実際に操作して影響がないか確認）
- [ ] エラーケースの確認（必要な場合）
```

## ワークフロー

### 計画承認フロー（メンバー）

1. Issue を確認し、実装計画を立てる（Plan モード推奨）
2. 計画をリーダーに報告（SendMessage）
3. リーダーの承認を待つ
4. 承認後、実装を開始

### PR 作成時（メンバー）

1. Issue を確認し、Issue 番号を取得
2. Notion タスクがあれば、タスク番号と URL を取得
3. テンプレートに従って PR 本文を作成
4. `gh pr create --title "..." --body "..."`
5. リーダーに完了報告（Issue と PR の URL を含める）

### PR レビュー（リーダー）

1. 動作確認のチェックボックスが全て完了しているか確認
2. 動作確認が実際のブラウザ操作や API 呼び出しで行われているか確認
3. 未完了の場合、メンバーにリジェクトして動作確認を依頼
4. 全て完了している場合、Manager に報告

## 注意事項

- 計画はメンバーが考え、リーダーが承認する
- 計画セクションは Plan モードのような詳細な自然文で書く。箇条書きだけでなく、実装の意図や背景を説明する
- 動作確認は全てのチェックが完了するまでリジェクトする
- 動作確認は実際にブラウザ操作や API 呼び出しで機能を動かして確認すること（test/check/build などの技術的チェックは含めない）
- Notion タスクがない場合は TASK-xxx の記載を省略する
- 概要の後に、嬉しいこと（何が良くなるか、できるようになるか）とリスク（影響範囲や注意点）を自然な文章で記載する
- プロパティ形式（「リスク評価:」など）は使わない
- セクション名は固定（計画、動作確認）
- Before/After など勝手にセクションを追加しない
